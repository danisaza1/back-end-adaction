//Le dice a Prisma que genere autom치ticamente un 
//cliente JavaScript para que puedas hacer consultas 
//en tu c칩digo. Es como construir un control de 
//videojuego personalizado para manejar tus personajes.


// generator =	Crea un cliente para que t칰 puedas usar 
//los modelos en tu c칩digo
// datasource = Le dice a Prisma d칩nde est치n 
//las tablas (base de datos)
// model= Define c칩mo se ven esas tablas y qu칠 datos guardan


// En Prisma, las relaciones son bidireccionales, 
// lo que significa que si WasteType est치 relacionado 
// con Collect, Prisma quiere que t칰 declares tambi칠n 
// la relaci칩n desde Collect hacia WasteType, aunque sea opcional.


generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") //esto esta en .env y que me lleva a Neon
}

model City {
  id         BigInt    @id @default(autoincrement())
  city_name  String
  lat        Float?    // Decimal(9,6) lo representamos como Float opcional
  lng        Float?    // Igual que lat
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt

  collect     Collect[] 

  @@map("cities")  // Mapea a la tabla real "cities" 
//   esto es si el nombre es distinto ya que Prisma solo 
//   "lee" model con pascal, osea primera letra majuscula
}

model Collect {
  id           BigInt    @id @default(autoincrement())
  date         DateTime
  city         String
  volunteerId  BigInt?   // clave for치nea opcional
  volunteer    Volunteer? @relation(fields: [volunteerId], references: [id], onDelete: SetNull)
  cityId       BigInt?   // clave for치nea opcional
  cityRel      City?     @relation(fields: [cityId], references: [id], onDelete: SetNull)
  created_at   DateTime  @default(now())
  updated_at   DateTime  @updatedAt

  wastes     WasteType[]  // 游녣 Esta es la relaci칩n inversa, quiere decir que collect puede tener muchos wastetypes relacionados

  @@map("collects")
}

model Volunteer {
  id           BigInt    @id @default(autoincrement())
  firstname    String
  lastname     String
  email        String    @unique 
  password     String
  location     String
  created_at   DateTime  @default(now())
  updated_at   DateTime  @updatedAt

  collect     Collect[]  

  @@map("volunteers")
}
//?  = campo que puede ser null


model WasteType {
  id          BigInt     @id @default(autoincrement())
  collecteId  BigInt?    // clave for치nea a collects
  collecte    Collect?   @relation(fields: [collecteId], references: [id], onDelete: SetNull)
  type        WasteEnum
  quantity    Int        @default(0)
  created_at  DateTime   @default(now())
  updated_at  DateTime   @updatedAt

  @@map("waste_types")
}



enum WasteEnum {
  cigarette_butts
  plastic
  glass
  metal
  electronic
  others
}







